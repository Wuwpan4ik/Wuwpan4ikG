@empty($show)
@else
    <div class="roleDisabled"></div>
    <button id="sidebarSwitchRight" onclick="useSidebar()">
        <svg width="6" height="8" viewBox="0 0 6 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.958274 3.99969C0.958008 4.15288 0.988018 4.30461 1.04658 4.44617C1.10514 4.58772 1.19111 4.7163 1.29952 4.82453L4.38769 7.91211L5.21252 7.08728L2.12494 3.99969L5.21252 0.912109L4.38769 0.0872746L1.30011 3.17486C1.19158 3.28303 1.10552 3.4116 1.04685 3.55315C0.988187 3.69471 0.958084 3.84646 0.958274 3.99969Z" fill="white" fill-opacity="0.3"/></svg>
    </button>
    <div class="firstRow">
        <div class="switchMenu">
            <button id="switchMenu" type="button" class="switchMenuBtn" onclick="useSidebar()">
                <svg class="canbegray" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.04166 6.99969C9.04193 7.15288 9.01192 7.30461 8.95336 7.44617C8.89479 7.58772 8.80883 7.7163 8.70041 7.82453L5.61225 10.9121L4.78741 10.0873L7.875 6.99969L4.78741 3.91211L5.61225 3.08727L8.69983 6.17486C8.80835 6.28303 8.89442 6.4116 8.95309 6.55315C9.01175 6.69471 9.04185 6.84646 9.04166 6.99969Z" fill="white" fill-opacity="0.3"/></svg>
                {{__('closeSidebar')}}
            </button>
        </div>
        <h2 class="title">
            {{ __("systemRole") }}
        </h2>
        <div class="systemRole" id="systemRole">
            <p class="systemRoleP">@if($chat->role) {{ $chat->role }} @else{{__('defaultSystemRole')}} @endif
            </p>
            <div class="hoverItems prompts">
                <button class="copyBtn">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_47_1013)">
                            <path d="M7.58366 11.6667C8.35692 11.6658 9.09825 11.3582 9.64503 10.8114C10.1918 10.2646 10.4994 9.52327 10.5003 8.75001V3.64176C10.5012 3.33514 10.4413 3.03138 10.3239 2.7481C10.2066 2.46483 10.0341 2.20766 9.81666 1.99151L8.50883 0.683677C8.29268 0.466195 8.03551 0.293778 7.75223 0.176422C7.46895 0.0590654 7.1652 -0.000897138 6.85858 1.01439e-05H4.08366C3.3104 0.000936394 2.56907 0.308525 2.02229 0.855305C1.47551 1.40209 1.16792 2.14341 1.16699 2.91668V8.75001C1.16792 9.52327 1.47551 10.2646 2.02229 10.8114C2.56907 11.3582 3.3104 11.6658 4.08366 11.6667H7.58366ZM2.33366 8.75001V2.91668C2.33366 2.45255 2.51803 2.00743 2.84622 1.67924C3.17441 1.35105 3.61953 1.16668 4.08366 1.16668C4.08366 1.16668 6.95308 1.17484 7.00033 1.18068V2.33334C7.00033 2.64276 7.12324 2.93951 7.34203 3.1583C7.56083 3.37709 7.85757 3.50001 8.16699 3.50001H9.31966C9.32549 3.54726 9.33366 8.75001 9.33366 8.75001C9.33366 9.21414 9.14928 9.65926 8.8211 9.98745C8.49291 10.3156 8.04779 10.5 7.58366 10.5H4.08366C3.61953 10.5 3.17441 10.3156 2.84622 9.98745C2.51803 9.65926 2.33366 9.21414 2.33366 8.75001V8.75001ZM12.8337 4.66668V11.0833C12.8327 11.8566 12.5251 12.5979 11.9784 13.1447C11.4316 13.6915 10.6903 13.9991 9.91699 14H4.66699C4.51228 14 4.36391 13.9386 4.25451 13.8292C4.14512 13.7198 4.08366 13.5714 4.08366 13.4167C4.08366 13.262 4.14512 13.1136 4.25451 13.0042C4.36391 12.8948 4.51228 12.8333 4.66699 12.8333H9.91699C10.3811 12.8333 10.8262 12.649 11.1544 12.3208C11.4826 11.9926 11.667 11.5475 11.667 11.0833V4.66668C11.667 4.51197 11.7284 4.36359 11.8378 4.2542C11.9472 4.1448 12.0956 4.08334 12.2503 4.08334C12.405 4.08334 12.5534 4.1448 12.6628 4.2542C12.7722 4.36359 12.8337 4.51197 12.8337 4.66668Z" fill="white"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_47_1013">
                                <rect width="14" height="14" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>
                </button>
                <button class="renameChat">
                    <svg class="svgPath" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_16_2302)">
                            <path d="M9.52215 0.478314C9.23888 0.195479 8.85495 0.0366211 8.45465 0.0366211C8.05435 0.0366211 7.67042 0.195479 7.38715 0.478314L0.610484 7.25498C0.416422 7.44795 0.262552 7.67749 0.157775 7.93031C0.0529981 8.18313 -0.000604788 8.45422 6.72773e-05 8.7279V9.58331C6.72773e-05 9.69382 0.043966 9.7998 0.122106 9.87794C0.200246 9.95608 0.306227 9.99998 0.416734 9.99998H1.27215C1.5458 10.0008 1.81689 9.94724 2.06972 9.84253C2.32254 9.73782 2.55209 9.584 2.74507 9.38998L9.52215 2.6129C9.80486 2.32965 9.96364 1.9458 9.96364 1.54561C9.96364 1.14541 9.80486 0.761566 9.52215 0.478314ZM2.1559 8.80081C1.9209 9.03425 1.60339 9.16569 1.27215 9.16665H0.833401V8.7279C0.832979 8.56369 0.865132 8.40103 0.927999 8.24934C0.990867 8.09764 1.0832 7.95992 1.19965 7.84415L6.34257 2.70123L7.3009 3.65956L2.1559 8.80081ZM8.93257 2.02373L7.8884 3.06831L6.93007 2.11206L7.97465 1.06748C8.03758 1.00469 8.11225 0.954913 8.19441 0.920985C8.27658 0.887056 8.36462 0.869643 8.45351 0.86974C8.5424 0.869837 8.63041 0.887441 8.7125 0.921548C8.79459 0.955655 8.86915 1.0056 8.93194 1.06852C8.99473 1.13145 9.04451 1.20612 9.07844 1.28829C9.11237 1.37045 9.12978 1.45849 9.12968 1.54738C9.12959 1.63628 9.11198 1.72428 9.07787 1.80637C9.04377 1.88846 8.99383 1.96303 8.9309 2.02581L8.93257 2.02373Z" fill="white"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_16_2302">
                                <rect width="10" height="10" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>
                </button>
            </div>
            <!--Смена системной роли-->
            <div class="formSystemRole nonActive">

                <form class="change__role" onsubmit="return changeRole(event)" action="{{ route('chat.updateRole', $chat->id) }}" method="POST">
                    @csrf
                    <textarea name="role" id="systemRoleText" oninput="autoResize(this);"></textarea>
                    <div class="buttons">
                        <button class="renameChat" type="submit">
                            {{__('btnSave')}}
                        </button>
                        <button id="dismissRole" type="button">
                            {{__('btnDismiss')}}
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <!--Открытие каталога ролей-->
        <div class="chooseRoleFrom">
            <button id="chooseRole" type="button" onclick="open_catalog()">
                <svg class="canbegray" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_759_3249)"><path d="M15.75 4.5H13.5C13.5 3.30653 13.0259 2.16193 12.182 1.31802C11.3381 0.474106 10.1935 0 9 0C7.80653 0 6.66193 0.474106 5.81802 1.31802C4.97411 2.16193 4.5 3.30653 4.5 4.5H2.25C1.65326 4.5 1.08097 4.73705 0.65901 5.15901C0.237053 5.58097 0 6.15326 0 6.75L0 14.25C0.00119089 15.2442 0.396661 16.1973 1.09966 16.9003C1.80267 17.6033 2.7558 17.9988 3.75 18H14.25C15.2442 17.9988 16.1973 17.6033 16.9003 16.9003C17.6033 16.1973 17.9988 15.2442 18 14.25V6.75C18 6.15326 17.7629 5.58097 17.341 5.15901C16.919 4.73705 16.3467 4.5 15.75 4.5ZM9 1.5C9.79565 1.5 10.5587 1.81607 11.1213 2.37868C11.6839 2.94129 12 3.70435 12 4.5H6C6 3.70435 6.31607 2.94129 6.87868 2.37868C7.44129 1.81607 8.20435 1.5 9 1.5ZM16.5 14.25C16.5 14.8467 16.2629 15.419 15.841 15.841C15.419 16.2629 14.8467 16.5 14.25 16.5H3.75C3.15326 16.5 2.58097 16.2629 2.15901 15.841C1.73705 15.419 1.5 14.8467 1.5 14.25V6.75C1.5 6.55109 1.57902 6.36032 1.71967 6.21967C1.86032 6.07902 2.05109 6 2.25 6H4.5V7.5C4.5 7.69891 4.57902 7.88968 4.71967 8.03033C4.86032 8.17098 5.05109 8.25 5.25 8.25C5.44891 8.25 5.63968 8.17098 5.78033 8.03033C5.92098 7.88968 6 7.69891 6 7.5V6H12V7.5C12 7.69891 12.079 7.88968 12.2197 8.03033C12.3603 8.17098 12.5511 8.25 12.75 8.25C12.9489 8.25 13.1397 8.17098 13.2803 8.03033C13.421 7.88968 13.5 7.69891 13.5 7.5V6H15.75C15.9489 6 16.1397 6.07902 16.2803 6.21967C16.421 6.36032 16.5 6.55109 16.5 6.75V14.25Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_759_3249"><rect width="18" height="18" fill="white"/></clipPath></defs></svg>
                {{__('chooseRoleFromCatalog')}}
            </button>
        </div>
        <!--Настройки модели для чата-->
        <div class="chatSettings">
            <form id="chatSettings-form" action="{{ route('chats_settings.update', $chat->id) }}" method="POST">
                @csrf
                @method('PATCH')
                <h2>
                    {{__('modelSettingsHeading')}}
                </h2>
                <div class="popup-setting">
                    <div class="popup-setting-title">
                        {{__('modelSettingsLabelModel')}}
                    </div>
                    <div class="popup-setting-content withoutBorder ai_model" style="position: relative;">
                        <div class="firstRow" style="display: flex;align-items: center;width: 100%;gap: 0.521vw;background: #1D2129;border-radius: 0.521vw;padding: 0px 1.042vw;">
                            <svg class="svgPath" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_302_2352)"><path d="M14.25 0.749527H3.75C2.7558 0.750718 1.80267 1.14619 1.09966 1.84919C0.396661 2.5522 0.00119089 3.50533 0 4.49953L0 10.4995C0.00119089 11.4937 0.396661 12.4469 1.09966 13.1499C1.80267 13.8529 2.7558 14.2483 3.75 14.2495H8.25V15.7495H5.25C5.05109 15.7495 4.86032 15.8285 4.71967 15.9692C4.57902 16.1098 4.5 16.3006 4.5 16.4995C4.5 16.6984 4.57902 16.8892 4.71967 17.0299C4.86032 17.1705 5.05109 17.2495 5.25 17.2495H12.75C12.9489 17.2495 13.1397 17.1705 13.2803 17.0299C13.421 16.8892 13.5 16.6984 13.5 16.4995C13.5 16.3006 13.421 16.1098 13.2803 15.9692C13.1397 15.8285 12.9489 15.7495 12.75 15.7495H9.75V14.2495H14.25C15.2442 14.2483 16.1973 13.8529 16.9003 13.1499C17.6033 12.4469 17.9988 11.4937 18 10.4995V4.49953C17.9988 3.50533 17.6033 2.5522 16.9003 1.84919C16.1973 1.14619 15.2442 0.750718 14.25 0.749527ZM16.5 10.4995C16.5 11.0963 16.2629 11.6686 15.841 12.0905C15.419 12.5125 14.8467 12.7495 14.25 12.7495H3.75C3.15326 12.7495 2.58097 12.5125 2.15901 12.0905C1.73705 11.6686 1.5 11.0963 1.5 10.4995V4.49953C1.5 3.90279 1.73705 3.33049 2.15901 2.90854C2.58097 2.48658 3.15326 2.24953 3.75 2.24953H14.25C14.8467 2.24953 15.419 2.48658 15.841 2.90854C16.2629 3.33049 16.5 3.90279 16.5 4.49953V10.4995ZM15 7.49953C15 7.69844 14.921 7.8892 14.7803 8.02986C14.6397 8.17051 14.4489 8.24953 14.25 8.24953H12.0262L10.7513 10.1658C10.6825 10.2688 10.5894 10.3532 10.4801 10.4114C10.3708 10.4696 10.2488 10.4999 10.125 10.4995C10.1093 10.4995 10.0935 10.4995 10.0785 10.4995C9.94728 10.4914 9.82049 10.449 9.71084 10.3765C9.60119 10.304 9.51253 10.2039 9.45375 10.0863L7.782 6.74053L6.999 7.91578C6.93049 8.01846 6.83769 8.10265 6.72884 8.16087C6.61998 8.21909 6.49844 8.24955 6.375 8.24953H3.75C3.55109 8.24953 3.36032 8.17051 3.21967 8.02986C3.07902 7.8892 3 7.69844 3 7.49953C3 7.30061 3.07902 7.10985 3.21967 6.9692C3.36032 6.82854 3.55109 6.74953 3.75 6.74953H5.97375L7.24875 4.83328C7.32093 4.7227 7.42137 4.63344 7.53966 4.57476C7.65795 4.51607 7.78979 4.4901 7.9215 4.49953C8.05272 4.50761 8.17951 4.55004 8.28916 4.62257C8.39881 4.6951 8.48747 4.79518 8.54625 4.91278L10.218 8.25703L11.001 7.08178C11.0697 6.97937 11.1626 6.89547 11.2714 6.83752C11.3802 6.77957 11.5017 6.74934 11.625 6.74953H14.25C14.4489 6.74953 14.6397 6.82854 14.7803 6.9692C14.921 7.10985 15 7.30061 15 7.49953Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_302_2352"><rect width="18" height="18" fill="white"/></clipPath></defs></svg>
                            <select class="popup-setting-version" name="model_id">
                            @foreach($ai_versions as $version)
                                @if($version->disabled == true)
                                    <option value="{{ $version->id }}" disabled>{{ $version->title }}</option>
                                @else
                                    <option value="{{ $version->id }}">{{ $version->title }}</option>
                                @endif
                            @endforeach
                        </select>
                        </div>
                    </div>
                    <div class="popup-setting-desc">
                        {{__('modelSettingsDescModel')}}
                    </div>
                </div>
                <div class="popup-setting">
                    <div class="popup-setting-title">
                        {{__('modelSettingsLabelEco')}}
                    </div>
                    <div class="popup-setting-btns">
                        <input type="range" min="1" max="6" step="1" value="{{ $chat->econom }}" class="econom-rezhim slider-progress" id="eco-input" name="eco-input">
                        <div class="eco-stats">
                        <p>
                            {{__('ecoRezh')}}
                        </p>
                        <p>
                            {{__('tranzhRezh')}}
                        </p>
                        </div>
                    </div>
                    <div class="popup-setting-desc">
                        {{__('modelSettingsDescEco')}}
                    </div>
                </div>
                <div class="popup-setting">
                    <div class="popup-setting-title">
                        {{__('modelSettingsLabelTemp')}}
                    </div>
                    <div class="popup-setting-content withoutBorder">
                        <div class="modelSettings" id="tempAnswer">
                            <div class="firstRow">
                                <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_302_2367)"><path d="M14.583 18H4.08301C3.08881 17.9988 2.13568 17.6033 1.43267 16.9003C0.729669 16.1973 0.334199 15.2442 0.333008 14.25L0.333008 3.75C0.334199 2.7558 0.729669 1.80267 1.43267 1.09966C2.13568 0.396661 3.08881 0.00119089 4.08301 0L14.583 0C15.5772 0.00119089 16.5303 0.396661 17.2333 1.09966C17.9363 1.80267 18.3318 2.7558 18.333 3.75V14.25C18.3318 15.2442 17.9363 16.1973 17.2333 16.9003C16.5303 17.6033 15.5772 17.9988 14.583 18ZM4.08301 1.5C3.48627 1.5 2.91397 1.73705 2.49202 2.15901C2.07006 2.58097 1.83301 3.15326 1.83301 3.75V14.25C1.83301 14.8467 2.07006 15.419 2.49202 15.841C2.91397 16.2629 3.48627 16.5 4.08301 16.5H14.583C15.1797 16.5 15.752 16.2629 16.174 15.841C16.596 15.419 16.833 14.8467 16.833 14.25V3.75C16.833 3.15326 16.596 2.58097 16.174 2.15901C15.752 1.73705 15.1797 1.5 14.583 1.5H4.08301ZM8.58301 9C8.58301 9.14834 8.62699 9.29334 8.70941 9.41668C8.79182 9.54002 8.90895 9.63614 9.04599 9.69291C9.18304 9.74968 9.33384 9.76453 9.47933 9.73559C9.62481 9.70665 9.75845 9.63522 9.86334 9.53033C9.96823 9.42544 10.0397 9.2918 10.0686 9.14632C10.0975 9.00083 10.0827 8.85003 10.0259 8.71299C9.96915 8.57594 9.87302 8.45881 9.74969 8.3764C9.62635 8.29399 9.48134 8.25 9.33301 8.25C9.1341 8.25 8.94333 8.32902 8.80268 8.46967C8.66203 8.61032 8.58301 8.80109 8.58301 9ZM4.83301 5.25C4.83301 5.39834 4.87699 5.54334 4.95941 5.66668C5.04182 5.79001 5.15895 5.88614 5.296 5.94291C5.43304 5.99968 5.58384 6.01453 5.72933 5.98559C5.87481 5.95665 6.00845 5.88522 6.11334 5.78033C6.21823 5.67544 6.28966 5.5418 6.3186 5.39632C6.34754 5.25083 6.33268 5.10003 6.27592 4.96299C6.21915 4.82594 6.12302 4.70881 5.99969 4.6264C5.87635 4.54399 5.73134 4.5 5.58301 4.5C5.3841 4.5 5.19333 4.57902 5.05268 4.71967C4.91203 4.86032 4.83301 5.05109 4.83301 5.25ZM12.333 5.25C12.333 5.39834 12.377 5.54334 12.4594 5.66668C12.5418 5.79001 12.659 5.88614 12.796 5.94291C12.933 5.99968 13.0838 6.01453 13.2293 5.98559C13.3748 5.95665 13.5084 5.88522 13.6133 5.78033C13.7182 5.67544 13.7897 5.5418 13.8186 5.39632C13.8475 5.25083 13.8327 5.10003 13.7759 4.96299C13.7192 4.82594 13.623 4.70881 13.4997 4.6264C13.3763 4.54399 13.2313 4.5 13.083 4.5C12.8841 4.5 12.6933 4.57902 12.5527 4.71967C12.412 4.86032 12.333 5.05109 12.333 5.25ZM4.83301 12.75C4.83301 12.8983 4.87699 13.0433 4.95941 13.1667C5.04182 13.29 5.15895 13.3861 5.296 13.4429C5.43304 13.4997 5.58384 13.5145 5.72933 13.4856C5.87481 13.4566 6.00845 13.3852 6.11334 13.2803C6.21823 13.1754 6.28966 13.0418 6.3186 12.8963C6.34754 12.7508 6.33268 12.6 6.27592 12.463C6.21915 12.3259 6.12302 12.2088 5.99969 12.1264C5.87635 12.044 5.73134 12 5.58301 12C5.3841 12 5.19333 12.079 5.05268 12.2197C4.91203 12.3603 4.83301 12.5511 4.83301 12.75ZM12.333 12.75C12.333 12.8983 12.377 13.0433 12.4594 13.1667C12.5418 13.29 12.659 13.3861 12.796 13.4429C12.933 13.4997 13.0838 13.5145 13.2293 13.4856C13.3748 13.4566 13.5084 13.3852 13.6133 13.2803C13.7182 13.1754 13.7897 13.0418 13.8186 12.8963C13.8475 12.7508 13.8327 12.6 13.7759 12.463C13.7192 12.3259 13.623 12.2088 13.4997 12.1264C13.3763 12.044 13.2313 12 13.083 12C12.8841 12 12.6933 12.079 12.5527 12.2197C12.412 12.3603 12.333 12.5511 12.333 12.75Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_302_2367"><rect width="18" height="18" fill="white" transform="translate(0.333008)"/></clipPath></defs></svg>
                                <input type="number" step="0.1" name="temperature" value="{{ $chat->temperature }}" min="0" max="2" data-max-index="1" class="input" id="maxCountInput" readonly>
                            </div>
                            <div class="secondRow">
                                <button type="button" class="plusBtn">
                                    <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M13.084 8.25H10.084V5.25C10.084 5.05109 10.005 4.86032 9.86431 4.71967C9.72366 4.57902 9.5329 4.5 9.33398 4.5C9.13507 4.5 8.94431 4.57902 8.80365 4.71967C8.663 4.86032 8.58398 5.05109 8.58398 5.25V8.25H5.58398C5.38507 8.25 5.19431 8.32902 5.05365 8.46967C4.913 8.61032 4.83398 8.80109 4.83398 9C4.83398 9.19891 4.913 9.38968 5.05365 9.53033C5.19431 9.67098 5.38507 9.75 5.58398 9.75H8.58398V12.75C8.58398 12.9489 8.663 13.1397 8.80365 13.2803C8.94431 13.421 9.13507 13.5 9.33398 13.5C9.5329 13.5 9.72366 13.421 9.86431 13.2803C10.005 13.1397 10.084 12.9489 10.084 12.75V9.75H13.084C13.2829 9.75 13.4737 9.67098 13.6143 9.53033C13.755 9.38968 13.834 9.19891 13.834 9C13.834 8.80109 13.755 8.61032 13.6143 8.46967C13.4737 8.32902 13.2829 8.25 13.084 8.25Z" fill="white" fill-opacity="0.3"/></svg>
                                </button>
                                <button type="button" class="minusButton">
                                    <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M5.58398 8.24977C5.38507 8.24977 5.19431 8.32879 5.05365 8.46944C4.913 8.6101 4.83398 8.80086 4.83398 8.99978C4.83398 9.19869 4.913 9.38946 5.05365 9.53011C5.19431 9.67076 5.38507 9.74978 5.58398 9.74978H13.084C13.2829 9.74978 13.4737 9.67076 13.6143 9.53011C13.755 9.38946 13.834 9.19869 13.834 8.99978C13.834 8.80086 13.755 8.6101 13.6143 8.46944C13.4737 8.32879 13.2829 8.24977 13.084 8.24977H5.58398Z" fill="white" fill-opacity="0.3"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="popup-setting-desc">
                        {{__('modelSettingsDescTemp')}}
                    </div>
                </div>
                <button type="button" id="showFeatures" onclick="openSettings()" class="">
                    <div class="firstRow">
                        <svg class="canbegray" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_759_3240)"><path d="M9.00006 6C8.40672 6 7.8267 6.17595 7.33335 6.50559C6.84 6.83524 6.45549 7.30377 6.22842 7.85195C6.00136 8.40013 5.94195 9.00333 6.05771 9.58527C6.17346 10.1672 6.45918 10.7018 6.87874 11.1213C7.2983 11.5409 7.83285 11.8266 8.41479 11.9424C8.99674 12.0581 9.59994 11.9987 10.1481 11.7716C10.6963 11.5446 11.1648 11.1601 11.4945 10.6667C11.8241 10.1734 12.0001 9.59334 12.0001 9C12.0001 8.20435 11.684 7.44129 11.1214 6.87868C10.5588 6.31607 9.79571 6 9.00006 6ZM9.00006 10.5C8.70339 10.5 8.41338 10.412 8.16671 10.2472C7.92003 10.0824 7.72777 9.84811 7.61424 9.57403C7.50071 9.29994 7.47101 8.99834 7.52888 8.70736C7.58676 8.41639 7.72962 8.14912 7.9394 7.93934C8.14918 7.72956 8.41646 7.5867 8.70743 7.52882C8.9984 7.47094 9.3 7.50065 9.57409 7.61418C9.84818 7.72771 10.0824 7.91997 10.2473 8.16665C10.4121 8.41332 10.5001 8.70333 10.5001 9C10.5001 9.39783 10.342 9.77936 10.0607 10.0607C9.77942 10.342 9.39789 10.5 9.00006 10.5Z" fill="white" fill-opacity="0.3"/><path d="M15.9705 10.425L15.6375 10.233C15.7875 9.41733 15.7875 8.58117 15.6375 7.7655L15.9705 7.5735C16.2266 7.42576 16.4511 7.22903 16.6311 6.99455C16.8112 6.76006 16.9433 6.4924 17.0199 6.20686C17.0965 5.92132 17.1161 5.62349 17.0776 5.33037C17.0391 5.03725 16.9433 4.75458 16.7955 4.4985C16.6478 4.24242 16.4511 4.01795 16.2166 3.8379C15.9821 3.65785 15.7144 3.52575 15.4289 3.44915C15.1434 3.37254 14.8455 3.35292 14.5524 3.39142C14.2593 3.42991 13.9766 3.52576 13.7205 3.6735L13.3868 3.86625C12.7564 3.32769 12.032 2.91019 11.25 2.63475V2.25C11.25 1.65326 11.013 1.08097 10.591 0.65901C10.1691 0.237053 9.59677 0 9.00003 0C8.4033 0 7.831 0.237053 7.40904 0.65901C6.98708 1.08097 6.75003 1.65326 6.75003 2.25V2.63475C5.96807 2.91118 5.24392 3.3297 4.61403 3.86925L4.27878 3.675C3.76161 3.37663 3.14709 3.29593 2.57042 3.45065C1.99374 3.60536 1.50215 3.98283 1.20378 4.5C0.905414 5.01717 0.824711 5.63169 0.979429 6.20836C1.13415 6.78504 1.51161 7.27663 2.02878 7.575L2.36178 7.767C2.21186 8.58267 2.21186 9.41883 2.36178 10.2345L2.02878 10.4265C1.51161 10.7249 1.13415 11.2165 0.979429 11.7931C0.824711 12.3698 0.905414 12.9843 1.20378 13.5015C1.50215 14.0187 1.99374 14.3961 2.57042 14.5509C3.14709 14.7056 3.76161 14.6249 4.27878 14.3265L4.61253 14.1337C5.24311 14.6724 5.96777 15.0899 6.75003 15.3652V15.75C6.75003 16.3467 6.98708 16.919 7.40904 17.341C7.831 17.7629 8.4033 18 9.00003 18C9.59677 18 10.1691 17.7629 10.591 17.341C11.013 16.919 11.25 16.3467 11.25 15.75V15.3652C12.032 15.0888 12.7561 14.6703 13.386 14.1307L13.7213 14.3243C14.2385 14.6226 14.853 14.7033 15.4296 14.5486C16.0063 14.3939 16.4979 14.0164 16.7963 13.4993C17.0947 12.9821 17.1754 12.3676 17.0206 11.7909C16.8659 11.2142 16.4885 10.7226 15.9713 10.4242L15.9705 10.425ZM14.0595 7.593C14.3135 8.5133 14.3135 9.4852 14.0595 10.4055C14.0152 10.5657 14.0253 10.7361 14.0883 10.8899C14.1513 11.0437 14.2636 11.1722 14.4075 11.2552L15.2205 11.7248C15.3929 11.8242 15.5187 11.9881 15.5702 12.1803C15.6218 12.3725 15.5949 12.5773 15.4954 12.7496C15.396 12.922 15.2321 13.0478 15.0399 13.0993C14.8477 13.1509 14.6429 13.124 14.4705 13.0245L13.656 12.5535C13.512 12.4701 13.3442 12.4369 13.1792 12.4593C13.0142 12.4817 12.8614 12.5584 12.7448 12.6772C12.0772 13.3587 11.2362 13.845 10.3125 14.0835C10.1513 14.125 10.0085 14.2189 9.90648 14.3504C9.8045 14.482 9.7492 14.6438 9.74928 14.8102V15.75C9.74928 15.9489 9.67027 16.1397 9.52961 16.2803C9.38896 16.421 9.19819 16.5 8.99928 16.5C8.80037 16.5 8.6096 16.421 8.46895 16.2803C8.3283 16.1397 8.24928 15.9489 8.24928 15.75V14.811C8.24936 14.6445 8.19406 14.4828 8.09209 14.3512C7.99011 14.2196 7.84726 14.1257 7.68603 14.0842C6.76229 13.8448 5.92153 13.3575 5.25453 12.675C5.13793 12.5561 4.98509 12.4795 4.8201 12.4571C4.65511 12.4347 4.48736 12.4678 4.34328 12.5513L3.53028 13.0215C3.44495 13.0715 3.35057 13.1042 3.25258 13.1176C3.15458 13.131 3.0549 13.1249 2.95927 13.0996C2.86365 13.0743 2.77397 13.0303 2.6954 12.9703C2.61683 12.9102 2.55092 12.8352 2.50146 12.7495C2.452 12.6638 2.41998 12.5692 2.40723 12.4712C2.39448 12.3731 2.40126 12.2734 2.42717 12.178C2.45309 12.0825 2.49763 11.9931 2.55823 11.915C2.61883 11.8368 2.6943 11.7714 2.78028 11.7225L3.59328 11.253C3.73724 11.1699 3.84954 11.0414 3.91253 10.8876C3.97552 10.7338 3.98563 10.5634 3.94128 10.4032C3.6873 9.48295 3.6873 8.51105 3.94128 7.59075C3.98483 7.43091 3.97423 7.26115 3.91114 7.10797C3.84805 6.95479 3.73602 6.8268 3.59253 6.744L2.77953 6.2745C2.60717 6.17504 2.48139 6.01119 2.42984 5.81899C2.37829 5.62679 2.4052 5.42198 2.50466 5.24962C2.60411 5.07727 2.76796 4.95148 2.96017 4.89993C3.15237 4.84838 3.35717 4.87529 3.52953 4.97475L4.34403 5.44575C4.48772 5.52939 4.65512 5.56291 4.81993 5.54105C4.98474 5.51919 5.13761 5.4432 5.25453 5.325C5.9221 4.64351 6.7631 4.15727 7.68678 3.91875C7.84851 3.87717 7.99173 3.78281 8.09376 3.65063C8.19579 3.51844 8.25078 3.35598 8.25003 3.189V2.25C8.25003 2.05109 8.32905 1.86032 8.4697 1.71967C8.61035 1.57902 8.80112 1.5 9.00003 1.5C9.19894 1.5 9.38971 1.57902 9.53036 1.71967C9.67101 1.86032 9.75003 2.05109 9.75003 2.25V3.189C9.74995 3.35547 9.80525 3.51723 9.90723 3.64881C10.0092 3.78039 10.1521 3.8743 10.3133 3.91575C11.2373 4.15511 12.0783 4.64241 12.7455 5.325C12.8621 5.44385 13.015 5.52052 13.18 5.54292C13.345 5.56533 13.5127 5.5322 13.6568 5.44875L14.4698 4.9785C14.5551 4.92848 14.6495 4.89583 14.7475 4.88243C14.8455 4.86903 14.9452 4.87514 15.0408 4.90043C15.1364 4.92571 15.2261 4.96965 15.3047 5.02974C15.3832 5.08982 15.4492 5.16485 15.4986 5.2505C15.5481 5.33616 15.5801 5.43076 15.5928 5.52884C15.6056 5.62693 15.5988 5.72656 15.5729 5.82202C15.547 5.91747 15.5024 6.00686 15.4418 6.08503C15.3812 6.1632 15.3058 6.22861 15.2198 6.2775L14.4068 6.747C14.2636 6.83003 14.1518 6.95811 14.089 7.11127C14.0262 7.26443 14.0159 7.43407 14.0595 7.59375V7.593Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_759_3240"><rect width="18" height="18" fill="white"/></clipPath></defs></svg>
                        {{__('additionalSettings')}}
                    </div>
                    <div class="secondRow">
                        <svg class="canbegray" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11.625 9.00002C11.6254 9.19698 11.5868 9.39206 11.5115 9.57406C11.4362 9.75606 11.3257 9.92138 11.1863 10.0605L7.21577 14.0303L6.15527 12.9698L10.125 9.00002L6.15527 5.03027L7.21577 3.96977L11.1855 7.93952C11.3251 8.07861 11.4357 8.2439 11.5111 8.4259C11.5866 8.6079 11.6253 8.80301 11.625 9.00002Z" fill="white" fill-opacity="0.3"/>
                        </svg>
                    </div>
                </button>
                <!--Скрытые настройки-->
                <div class="hiddenSettings">
                    <div class="popup-setting">
                        <div class="popup-setting-title">
                            {{__('modelSettingsLabelVibor')}}
                        </div>
                        <div class="popup-setting-content withoutBorder">
                        <div class="modelSettings" id="viborkaSlov">
                            <div class="firstRow">
                                <svg class="svgPath" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_302_2376)"><path d="M14.6512 2.34153L13.4093 1.09803C13.0618 0.748768 12.6484 0.471888 12.1932 0.283417C11.738 0.0949461 11.2499 -0.00137292 10.7572 3.42726e-05H6C5.0058 0.00122517 4.05267 0.396696 3.34966 1.0997C2.64666 1.8027 2.25119 2.75584 2.25 3.75003V14.25C2.25119 15.2442 2.64666 16.1974 3.34966 16.9004C4.05267 17.6034 5.0058 17.9988 6 18H12C12.9942 17.9988 13.9473 17.6034 14.6503 16.9004C15.3533 16.1974 15.7488 15.2442 15.75 14.25V4.99278C15.7512 4.50017 15.6547 4.01221 15.4661 3.55713C15.2775 3.10205 15.0006 2.68888 14.6512 2.34153ZM13.5907 3.40203C13.6971 3.50802 13.7924 3.62463 13.875 3.75003H12V1.87503C12.1252 1.95852 12.242 2.05397 12.3488 2.16003L13.5907 3.40203ZM14.25 14.25C14.25 14.8468 14.0129 15.4191 13.591 15.841C13.169 16.263 12.5967 16.5 12 16.5H6C5.40326 16.5 4.83097 16.263 4.40901 15.841C3.98705 15.4191 3.75 14.8468 3.75 14.25V3.75003C3.75 3.1533 3.98705 2.581 4.40901 2.15904C4.83097 1.73709 5.40326 1.50003 6 1.50003H10.5V3.75003C10.5 4.14786 10.658 4.52939 10.9393 4.81069C11.2206 5.092 11.6022 5.25003 12 5.25003H14.25V14.25ZM12 6.75003C12.1989 6.75003 12.3897 6.82905 12.5303 6.9697C12.671 7.11036 12.75 7.30112 12.75 7.50003C12.75 7.69895 12.671 7.88971 12.5303 8.03036C12.3897 8.17102 12.1989 8.25003 12 8.25003H6C5.80109 8.25003 5.61032 8.17102 5.46967 8.03036C5.32902 7.88971 5.25 7.69895 5.25 7.50003C5.25 7.30112 5.32902 7.11036 5.46967 6.9697C5.61032 6.82905 5.80109 6.75003 6 6.75003H12ZM12.75 10.5C12.75 10.6989 12.671 10.8897 12.5303 11.0304C12.3897 11.171 12.1989 11.25 12 11.25H6C5.80109 11.25 5.61032 11.171 5.46967 11.0304C5.32902 10.8897 5.25 10.6989 5.25 10.5C5.25 10.3011 5.32902 10.1104 5.46967 9.9697C5.61032 9.82905 5.80109 9.75004 6 9.75004H12C12.1989 9.75004 12.3897 9.82905 12.5303 9.9697C12.671 10.1104 12.75 10.3011 12.75 10.5ZM12.606 13.0598C12.7226 13.2202 12.7709 13.4202 12.7404 13.6161C12.7099 13.8121 12.6031 13.9879 12.4432 14.1053C11.6834 14.6468 10.7834 14.9574 9.85125 15C9.30666 14.9974 8.77861 14.8126 8.35125 14.475C8.10525 14.3063 8.0115 14.25 7.82625 14.25C7.32482 14.3276 6.85171 14.5327 6.45225 14.8455C6.29381 14.9585 6.09768 15.0054 5.90527 14.9765C5.71286 14.9475 5.53924 14.8449 5.42106 14.6903C5.30289 14.5358 5.24942 14.3413 5.27194 14.148C5.29445 13.9548 5.3912 13.7778 5.54175 13.6545C6.20263 13.1415 6.99621 12.8277 7.82925 12.75C8.32885 12.758 8.81184 12.9307 9.20325 13.2413C9.38166 13.4018 9.61137 13.4935 9.85125 13.5C10.4645 13.4541 11.0542 13.2446 11.559 12.8933C11.72 12.7766 11.9206 12.7286 12.117 12.7598C12.3133 12.7911 12.4892 12.8989 12.606 13.0598Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_302_2376"><rect width="18" height="18" fill="white"/></clipPath></defs></svg>
                                <input type="number" step="0.1" name="frequency" value="{{ $chat->frequency }}" min="0" max="1.0" data-max-index="1" class="input" id="maxCountInput" readonly>
                            </div>
                            <div class="secondRow">
                                <button type="button" class="plusBtn">
                                    <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M13.084 8.25H10.084V5.25C10.084 5.05109 10.005 4.86032 9.86431 4.71967C9.72366 4.57902 9.5329 4.5 9.33398 4.5C9.13507 4.5 8.94431 4.57902 8.80365 4.71967C8.663 4.86032 8.58398 5.05109 8.58398 5.25V8.25H5.58398C5.38507 8.25 5.19431 8.32902 5.05365 8.46967C4.913 8.61032 4.83398 8.80109 4.83398 9C4.83398 9.19891 4.913 9.38968 5.05365 9.53033C5.19431 9.67098 5.38507 9.75 5.58398 9.75H8.58398V12.75C8.58398 12.9489 8.663 13.1397 8.80365 13.2803C8.94431 13.421 9.13507 13.5 9.33398 13.5C9.5329 13.5 9.72366 13.421 9.86431 13.2803C10.005 13.1397 10.084 12.9489 10.084 12.75V9.75H13.084C13.2829 9.75 13.4737 9.67098 13.6143 9.53033C13.755 9.38968 13.834 9.19891 13.834 9C13.834 8.80109 13.755 8.61032 13.6143 8.46967C13.4737 8.32902 13.2829 8.25 13.084 8.25Z" fill="white" fill-opacity="0.3"/></svg>
                                </button>
                                <button type="button" class="minusButton">
                                    <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M5.58398 8.24977C5.38507 8.24977 5.19431 8.32879 5.05365 8.46944C4.913 8.6101 4.83398 8.80086 4.83398 8.99978C4.83398 9.19869 4.913 9.38946 5.05365 9.53011C5.19431 9.67076 5.38507 9.74978 5.58398 9.74978H13.084C13.2829 9.74978 13.4737 9.67076 13.6143 9.53011C13.755 9.38946 13.834 9.19869 13.834 8.99978C13.834 8.80086 13.755 8.6101 13.6143 8.46944C13.4737 8.32879 13.2829 8.24977 13.084 8.24977H5.58398Z" fill="white" fill-opacity="0.3"/></svg>
                                </button>
                            </div>
                        </div>
                        </div>
                        <div class="popup-setting-desc">
                            {{__('modelSettingsDescVibor')}}
                        </div>
                    </div>
                    <div class="popup-setting">
                        <div class="popup-setting-title">
                            {{__('modelSettingsLabelIndex')}}
                        </div>
                        <div class="popup-setting-content withoutBorder">
                            <div class="modelSettings" id="indexTheme">
                                <div class="firstRow">
                                    <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_302_2384)"><path d="M18.6667 8.62501C18.6649 8.11936 18.5489 7.62064 18.3273 7.1661C18.1058 6.71156 17.7844 6.31294 17.3872 6.00001C17.9367 5.56682 18.3373 4.97292 18.5331 4.30114C18.7289 3.62936 18.7101 2.91322 18.4794 2.25263C18.2487 1.59203 17.8175 1.01991 17.2461 0.6161C16.6746 0.212285 15.9914 -0.00309178 15.2917 1.40503e-05H4.04168C3.34196 -0.00309178 2.65872 0.212285 2.08727 0.6161C1.51582 1.01991 1.08467 1.59203 0.853953 2.25263C0.623238 2.91322 0.604472 3.62936 0.80027 4.30114C0.996069 4.97292 1.39667 5.56682 1.94618 6.00001C1.54759 6.31169 1.22521 6.71005 1.0035 7.16487C0.781784 7.61969 0.666557 8.11903 0.666557 8.62501C0.666557 9.131 0.781784 9.63034 1.0035 10.0852C1.22521 10.54 1.54759 10.9383 1.94618 11.25C1.39667 11.6832 0.996069 12.2771 0.80027 12.9489C0.604472 13.6207 0.623238 14.3368 0.853953 14.9974C1.08467 15.658 1.51582 16.2301 2.08727 16.6339C2.65872 17.0377 3.34196 17.2531 4.04168 17.25H15.2917C15.9914 17.2531 16.6746 17.0377 17.2461 16.6339C17.8175 16.2301 18.2487 15.658 18.4794 14.9974C18.7101 14.3368 18.7289 13.6207 18.5331 12.9489C18.3373 12.2771 17.9367 11.6832 17.3872 11.25C17.7844 10.9371 18.1058 10.5385 18.3273 10.0839C18.5489 9.62939 18.6649 9.13067 18.6667 8.62501ZM2.16668 3.37501C2.16668 2.87773 2.36423 2.40082 2.71586 2.04919C3.06749 1.69756 3.5444 1.50001 4.04168 1.50001H4.41668V2.25001C4.41668 2.44893 4.4957 2.63969 4.63635 2.78034C4.77701 2.921 4.96777 3.00001 5.16668 3.00001C5.3656 3.00001 5.55636 2.921 5.69701 2.78034C5.83767 2.63969 5.91668 2.44893 5.91668 2.25001V1.50001H7.41668V2.25001C7.41668 2.44893 7.4957 2.63969 7.63635 2.78034C7.77701 2.921 7.96777 3.00001 8.16668 3.00001C8.3656 3.00001 8.55636 2.921 8.69701 2.78034C8.83767 2.63969 8.91668 2.44893 8.91668 2.25001V1.50001H15.2917C15.789 1.50001 16.2659 1.69756 16.6175 2.04919C16.9691 2.40082 17.1667 2.87773 17.1667 3.37501C17.1667 3.87229 16.9691 4.34921 16.6175 4.70084C16.2659 5.05247 15.789 5.25001 15.2917 5.25001H4.04168C3.5444 5.25001 3.06749 5.05247 2.71586 4.70084C2.36423 4.34921 2.16668 3.87229 2.16668 3.37501ZM17.1667 13.875C17.1667 14.3723 16.9691 14.8492 16.6175 15.2008C16.2659 15.5525 15.789 15.75 15.2917 15.75H4.04168C3.5444 15.75 3.06749 15.5525 2.71586 15.2008C2.36423 14.8492 2.16668 14.3723 2.16668 13.875C2.16668 13.3777 2.36423 12.9008 2.71586 12.5492C3.06749 12.1976 3.5444 12 4.04168 12H4.41668V12.75C4.41668 12.9489 4.4957 13.1397 4.63635 13.2803C4.77701 13.421 4.96777 13.5 5.16668 13.5C5.3656 13.5 5.55636 13.421 5.69701 13.2803C5.83767 13.1397 5.91668 12.9489 5.91668 12.75V12H7.41668V12.75C7.41668 12.9489 7.4957 13.1397 7.63635 13.2803C7.77701 13.421 7.96777 13.5 8.16668 13.5C8.3656 13.5 8.55636 13.421 8.69701 13.2803C8.83767 13.1397 8.91668 12.9489 8.91668 12.75V12H15.2917C15.789 12 16.2659 12.1976 16.6175 12.5492C16.9691 12.9008 17.1667 13.3777 17.1667 13.875ZM4.04168 10.5C3.5444 10.5 3.06749 10.3025 2.71586 9.95084C2.36423 9.59921 2.16668 9.12229 2.16668 8.62501C2.16668 8.12773 2.36423 7.65082 2.71586 7.29919C3.06749 6.94756 3.5444 6.75001 4.04168 6.75001H4.41668V7.50001C4.41668 7.69893 4.4957 7.88969 4.63635 8.03034C4.77701 8.171 4.96777 8.25001 5.16668 8.25001C5.3656 8.25001 5.55636 8.171 5.69701 8.03034C5.83767 7.88969 5.91668 7.69893 5.91668 7.50001V6.75001H7.41668V7.50001C7.41668 7.69893 7.4957 7.88969 7.63635 8.03034C7.77701 8.171 7.96777 8.25001 8.16668 8.25001C8.3656 8.25001 8.55636 8.171 8.69701 8.03034C8.83767 7.88969 8.91668 7.69893 8.91668 7.50001V6.75001H15.2917C15.789 6.75001 16.2659 6.94756 16.6175 7.29919C16.9691 7.65082 17.1667 8.12773 17.1667 8.62501C17.1667 9.12229 16.9691 9.59921 16.6175 9.95084C16.2659 10.3025 15.789 10.5 15.2917 10.5H4.04168Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_302_2384"><rect width="18" height="18" fill="white" transform="translate(0.666992)"/></clipPath></defs></svg>
                                    <input type="number" step="0.1" name="top_p" value="{{ $chat->top_p }}" min="0" max="1.0" data-max-index="1" class="input" id="indexTheme" readonly>
                                </div>
                                <div class="secondRow">
                                    <button type="button" class="plusBtn">
                                        <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M13.084 8.25H10.084V5.25C10.084 5.05109 10.005 4.86032 9.86431 4.71967C9.72366 4.57902 9.5329 4.5 9.33398 4.5C9.13507 4.5 8.94431 4.57902 8.80365 4.71967C8.663 4.86032 8.58398 5.05109 8.58398 5.25V8.25H5.58398C5.38507 8.25 5.19431 8.32902 5.05365 8.46967C4.913 8.61032 4.83398 8.80109 4.83398 9C4.83398 9.19891 4.913 9.38968 5.05365 9.53033C5.19431 9.67098 5.38507 9.75 5.58398 9.75H8.58398V12.75C8.58398 12.9489 8.663 13.1397 8.80365 13.2803C8.94431 13.421 9.13507 13.5 9.33398 13.5C9.5329 13.5 9.72366 13.421 9.86431 13.2803C10.005 13.1397 10.084 12.9489 10.084 12.75V9.75H13.084C13.2829 9.75 13.4737 9.67098 13.6143 9.53033C13.755 9.38968 13.834 9.19891 13.834 9C13.834 8.80109 13.755 8.61032 13.6143 8.46967C13.4737 8.32902 13.2829 8.25 13.084 8.25Z" fill="white" fill-opacity="0.3"/></svg>
                                    </button>
                                    <button type="button" class="minusButton">
                                        <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M5.58398 8.24977C5.38507 8.24977 5.19431 8.32879 5.05365 8.46944C4.913 8.6101 4.83398 8.80086 4.83398 8.99978C4.83398 9.19869 4.913 9.38946 5.05365 9.53011C5.19431 9.67076 5.38507 9.74978 5.58398 9.74978H13.084C13.2829 9.74978 13.4737 9.67076 13.6143 9.53011C13.755 9.38946 13.834 9.19869 13.834 8.99978C13.834 8.80086 13.755 8.6101 13.6143 8.46944C13.4737 8.32879 13.2829 8.24977 13.084 8.24977H5.58398Z" fill="white" fill-opacity="0.3"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="popup-setting-desc">
                            {{__('modelSettingsDescIndex')}}
                        </div>
                    </div>
                    <div class="popup-setting">
                        <div class="popup-setting-title">
                            {{__('modelSettingsLabelRepeat')}}
                        </div>
                        <div class="popup-setting-content withoutBorder">
                            <div class="modelSettings" id="repeatSlov">
                                <div class="firstRow">
                                    <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_302_2392)"><path d="M14.5834 -7.62939e-06H10.8334C10.6345 -7.62939e-06 10.4438 0.07901 10.3031 0.219662C10.1625 0.360315 10.0834 0.55108 10.0834 0.749992C10.0834 0.948905 10.1625 1.13967 10.3031 1.28032C10.4438 1.42097 10.6345 1.49999 10.8334 1.49999H14.5834C14.9176 1.50129 15.247 1.57821 15.5472 1.72499L0.553185 16.7197C0.481552 16.7889 0.424416 16.8717 0.385109 16.9632C0.345802 17.0547 0.325112 17.1531 0.324247 17.2527C0.323382 17.3523 0.342358 17.451 0.380069 17.5432C0.417779 17.6354 0.473469 17.7191 0.543889 17.7895C0.614308 17.86 0.698047 17.9156 0.790219 17.9534C0.882392 17.9911 0.981151 18.01 1.08074 18.0092C1.18032 18.0083 1.27874 17.9876 1.37024 17.9483C1.46174 17.909 1.5445 17.8519 1.61369 17.7802L16.6084 2.78624C16.7552 3.08639 16.8321 3.41588 16.8334 3.74999V7.49999C16.8334 7.69891 16.9125 7.88967 17.0531 8.03032C17.1938 8.17098 17.3845 8.24999 17.5834 8.24999C17.7823 8.24999 17.9731 8.17098 18.1138 8.03032C18.2544 7.88967 18.3334 7.69891 18.3334 7.49999V3.74999C18.3322 2.7558 17.9368 1.80266 17.2338 1.09966C16.5308 0.396654 15.5776 0.00118326 14.5834 -7.62939e-06V-7.62939e-06Z" fill="white" fill-opacity="0.3"/><path d="M4.83301 7.50009C5.42635 7.50009 6.00637 7.32414 6.49972 6.99449C6.99307 6.66485 7.37758 6.19631 7.60465 5.64814C7.83171 5.09996 7.89112 4.49676 7.77536 3.91481C7.65961 3.33287 7.37389 2.79832 6.95433 2.37876C6.53477 1.95921 6.00022 1.67349 5.41828 1.55773C4.83634 1.44197 4.23314 1.50138 3.68496 1.72845C3.13678 1.95551 2.66824 2.34003 2.3386 2.83337C2.00895 3.32672 1.83301 3.90674 1.83301 4.50009C1.83301 5.29573 2.14908 6.0588 2.71169 6.62141C3.2743 7.18401 4.03736 7.50009 4.83301 7.50009ZM4.83301 3.00009C5.12968 3.00009 5.41969 3.08806 5.66636 3.25288C5.91304 3.4177 6.1053 3.65197 6.21883 3.92606C6.33236 4.20015 6.36206 4.50175 6.30419 4.79272C6.24631 5.08369 6.10345 5.35097 5.89367 5.56075C5.68389 5.77052 5.41661 5.91339 5.12564 5.97126C4.83467 6.02914 4.53307 5.99944 4.25898 5.8859C3.98489 5.77237 3.75063 5.58011 3.5858 5.33344C3.42098 5.08677 3.33301 4.79676 3.33301 4.50009C3.33301 4.10226 3.49104 3.72073 3.77235 3.43942C4.05365 3.15812 4.43518 3.00009 4.83301 3.00009Z" fill="white" fill-opacity="0.3"/><path d="M13.833 10.5001C13.2397 10.5001 12.6596 10.6761 12.1663 11.0057C11.673 11.3353 11.2884 11.8039 11.0614 12.3521C10.8343 12.9002 10.7749 13.5034 10.8907 14.0854C11.0064 14.6673 11.2921 15.2019 11.7117 15.6214C12.1312 16.041 12.6658 16.3267 13.2477 16.4425C13.8297 16.5582 14.4329 16.4988 14.9811 16.2717C15.5292 16.0447 15.9978 15.6602 16.3274 15.1668C16.6571 14.6735 16.833 14.0935 16.833 13.5001C16.833 12.7045 16.5169 11.9414 15.9543 11.3788C15.3917 10.8162 14.6287 10.5001 13.833 10.5001ZM13.833 15.0001C13.5363 15.0001 13.2463 14.9121 12.9997 14.7473C12.753 14.5825 12.5607 14.3482 12.4472 14.0741C12.3337 13.8 12.304 13.4984 12.3618 13.2075C12.4197 12.9165 12.5626 12.6492 12.7723 12.4394C12.9821 12.2297 13.2494 12.0868 13.5404 12.0289C13.8313 11.9711 14.1329 12.0008 14.407 12.1143C14.6811 12.2278 14.9154 12.4201 15.0802 12.6668C15.245 12.9134 15.333 13.2034 15.333 13.5001C15.333 13.8979 15.175 14.2795 14.8937 14.5608C14.6124 14.8421 14.2308 15.0001 13.833 15.0001Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_302_2392"><rect width="18" height="18" fill="white" transform="translate(0.333008)"/></clipPath></defs></svg>
                                    <input type="number" step="0.1" name="presence" value="{{ $chat->presence }}" min="0" max="1.0" data-max-index="1" class="input" id="repeatSlov" readonly>
                                </div>
                                <div class="secondRow">
                                    <button type="button" class="plusBtn">
                                        <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M13.084 8.25H10.084V5.25C10.084 5.05109 10.005 4.86032 9.86431 4.71967C9.72366 4.57902 9.5329 4.5 9.33398 4.5C9.13507 4.5 8.94431 4.57902 8.80365 4.71967C8.663 4.86032 8.58398 5.05109 8.58398 5.25V8.25H5.58398C5.38507 8.25 5.19431 8.32902 5.05365 8.46967C4.913 8.61032 4.83398 8.80109 4.83398 9C4.83398 9.19891 4.913 9.38968 5.05365 9.53033C5.19431 9.67098 5.38507 9.75 5.58398 9.75H8.58398V12.75C8.58398 12.9489 8.663 13.1397 8.80365 13.2803C8.94431 13.421 9.13507 13.5 9.33398 13.5C9.5329 13.5 9.72366 13.421 9.86431 13.2803C10.005 13.1397 10.084 12.9489 10.084 12.75V9.75H13.084C13.2829 9.75 13.4737 9.67098 13.6143 9.53033C13.755 9.38968 13.834 9.19891 13.834 9C13.834 8.80109 13.755 8.61032 13.6143 8.46967C13.4737 8.32902 13.2829 8.25 13.084 8.25Z" fill="white" fill-opacity="0.3"/></svg>
                                    </button>
                                    <button type="button" class="minusButton">
                                        <svg class="svgPath" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.333984" width="18" height="18" rx="9" fill="white" fill-opacity="0.1"/><path d="M5.58398 8.24977C5.38507 8.24977 5.19431 8.32879 5.05365 8.46944C4.913 8.6101 4.83398 8.80086 4.83398 8.99978C4.83398 9.19869 4.913 9.38946 5.05365 9.53011C5.19431 9.67076 5.38507 9.74978 5.58398 9.74978H13.084C13.2829 9.74978 13.4737 9.67076 13.6143 9.53011C13.755 9.38946 13.834 9.19869 13.834 8.99978C13.834 8.80086 13.755 8.6101 13.6143 8.46944C13.4737 8.32879 13.2829 8.24977 13.084 8.24977H5.58398Z" fill="white" fill-opacity="0.3"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="popup-setting-desc">
                            {{__('modelSettingsDescRepeat')}}
                        </div>
                    </div>
                </div>
                <div class="linear-container">
                    <button id="saveSettingsRoles" onclick="chat__settings()" type="button">
                        <svg class="canbegray" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_73_1686)"><path d="M7.49984 6.33325C7.03835 6.33325 6.58722 6.4701 6.20351 6.72649C5.81979 6.98288 5.52072 7.3473 5.34412 7.77366C5.16751 8.20002 5.12131 8.66917 5.21134 9.1218C5.30137 9.57442 5.5236 9.99018 5.84992 10.3165C6.17625 10.6428 6.59201 10.8651 7.04463 10.9551C7.49725 11.0451 7.96641 10.9989 8.39277 10.8223C8.81913 10.6457 9.18354 10.3466 9.43993 9.96292C9.69632 9.5792 9.83317 9.12807 9.83317 8.66659C9.83317 8.04775 9.58734 7.45425 9.14975 7.01667C8.71217 6.57908 8.11868 6.33325 7.49984 6.33325V6.33325ZM7.49984 9.83325C7.26909 9.83325 7.04353 9.76483 6.85167 9.63663C6.65982 9.50844 6.51028 9.32623 6.42198 9.11305C6.33368 8.89987 6.31057 8.66529 6.35559 8.43898C6.4006 8.21267 6.51172 8.00479 6.67488 7.84163C6.83804 7.67847 7.04592 7.56735 7.27223 7.52234C7.49854 7.47732 7.73312 7.50042 7.9463 7.58873C8.15948 7.67703 8.34169 7.82656 8.46989 8.01842C8.59808 8.21028 8.66651 8.43584 8.66651 8.66659C8.66651 8.976 8.54359 9.27275 8.3248 9.49154C8.106 9.71034 7.80926 9.83325 7.49984 9.83325Z" fill="#DADADA"/><path d="M13.646 2.90451L12.0955 1.35401C11.8253 1.08238 11.504 0.867033 11.15 0.720443C10.796 0.573853 10.4165 0.49893 10.0334 0.500012H3.41667C2.6434 0.500938 1.90208 0.808526 1.3553 1.35531C0.808515 1.90209 0.500926 2.64341 0.5 3.41668L0.5 11.5833C0.500926 12.3566 0.808515 13.0979 1.3553 13.6447C1.90208 14.1915 2.6434 14.4991 3.41667 14.5H11.5833C12.3566 14.4991 13.0979 14.1915 13.6447 13.6447C14.1915 13.0979 14.4991 12.3566 14.5 11.5833V4.9666C14.5011 4.58348 14.4262 4.20396 14.2796 3.85C14.133 3.49605 13.9176 3.17468 13.646 2.90451V2.90451ZM10.4167 1.71334V2.25001C10.4167 2.71414 10.2323 3.15926 9.9041 3.48745C9.57592 3.81564 9.1308 4.00001 8.66667 4.00001H6.33333C5.8692 4.00001 5.42409 3.81564 5.0959 3.48745C4.76771 3.15926 4.58333 2.71414 4.58333 2.25001V1.66668H10.0334C10.1625 1.66782 10.2911 1.68348 10.4167 1.71334V1.71334ZM13.3333 11.5833C13.3333 12.0475 13.149 12.4926 12.8208 12.8208C12.4926 13.149 12.0475 13.3333 11.5833 13.3333H3.41667C2.95254 13.3333 2.50742 13.149 2.17923 12.8208C1.85104 12.4926 1.66667 12.0475 1.66667 11.5833V3.41668C1.66667 2.95255 1.85104 2.50743 2.17923 2.17924C2.50742 1.85105 2.95254 1.66668 3.41667 1.66668V2.25001C3.41759 3.02328 3.72518 3.7646 4.27196 4.31138C4.81874 4.85816 5.56007 5.16575 6.33333 5.16668H8.66667C9.4002 5.1644 10.1058 4.88531 10.6425 4.38522C11.1791 3.88513 11.5072 3.2009 11.5612 2.46934L12.8212 3.72935C13.1481 4.05827 13.3321 4.50284 13.3333 4.9666V11.5833Z" fill="#DADADA"/></g><defs><clipPath id="clip0_73_1686"><rect width="14" height="14" fill="white" transform="translate(0.5 0.5)"/></clipPath></defs></svg>
                        {{__('btnSave')}}
                    </button>
                </div>
                <div class="mob-item">
                    <button type="button" id="closeSettingsMob">
                        <svg class="canbegray" width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_894_4176)"><path d="M11.9698 5.46973L9.50003 7.93947L7.03029 5.46973L5.96979 6.53022L8.43953 8.99997L5.96979 11.4697L7.03029 12.5302L9.50003 10.0605L11.9698 12.5302L13.0303 11.4697L10.5605 8.99997L13.0303 6.53022L11.9698 5.46973Z" fill="white" fill-opacity="0.3"/><path d="M9.5 0C7.71997 0 5.97991 0.527841 4.49987 1.51677C3.01983 2.50571 1.86628 3.91131 1.18509 5.55585C0.5039 7.20038 0.32567 9.00998 0.672937 10.7558C1.0202 12.5016 1.87737 14.1053 3.13604 15.364C4.39472 16.6226 5.99836 17.4798 7.74419 17.8271C9.49002 18.1743 11.2996 17.9961 12.9442 17.3149C14.5887 16.6337 15.9943 15.4802 16.9832 14.0001C17.9722 12.5201 18.5 10.78 18.5 9C18.4974 6.61384 17.5484 4.32616 15.8611 2.63889C14.1738 0.951621 11.8862 0.00258081 9.5 0V0ZM9.5 16.5C8.01664 16.5 6.5666 16.0601 5.33323 15.236C4.09986 14.4119 3.13856 13.2406 2.57091 11.8701C2.00325 10.4997 1.85473 8.99168 2.14411 7.53682C2.4335 6.08197 3.14781 4.74559 4.1967 3.6967C5.2456 2.64781 6.58197 1.9335 8.03683 1.64411C9.49168 1.35472 10.9997 1.50325 12.3701 2.0709C13.7406 2.63856 14.9119 3.59985 15.736 4.83322C16.5601 6.06659 17 7.51664 17 9C16.9978 10.9885 16.2069 12.8948 14.8009 14.3009C13.3948 15.7069 11.4885 16.4978 9.5 16.5Z" fill="white" fill-opacity="0.3"/></g><defs><clipPath id="clip0_894_4176"><rect width="18" height="18" fill="white" transform="translate(0.5)"/></clipPath></defs></svg>
                        {{__('btnClose')}}
                    </button>
                </div>
            </form>
        </div>
    </div>
@endempty
<script>

    // Экономный режим
    if (document.querySelector('#eco-input')) {
        document.querySelector('#eco-input').addEventListener('mouseup', function () {
            let input = document.querySelector('#eco-input')
            let eco_number = input.value;
            console.log(`/chat/changeEconom/{{ $chat->id }}?econom=${eco_number}`)
            fetch(`/chat/changeEconom/{{ $chat->id }}?econom=${eco_number}`)
        })
    }

    //Copy btn system role
    document.querySelector("button.copyBtn").onclick = function() {
        var copyTextarea = document.createElement("textarea");
        copyTextarea.style.position = "fixed";
        copyTextarea.style.opacity = "0";
        copyTextarea.textContent = String(document.querySelector("#systemRole p").textContent).trim();
        document.body.appendChild(copyTextarea);
        copyTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(copyTextarea);
        let lastSvg = this.innerHTML;
        this.innerHTML = `<svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_8_718)">
        <path d="M19.9499 5.53642L16.4639 2.05042C15.8155 1.3985 15.0442 0.881645 14.1947 0.529765C13.3452 0.177884 12.4344 -0.00203383 11.5149 0.000421525H6.99988C5.67428 0.00200938 4.40344 0.529304 3.4661 1.46664C2.52876 2.40398 2.00147 3.67483 1.99988 5.00042V19.0004C2.00147 20.326 2.52876 21.5969 3.4661 22.5342C4.40344 23.4715 5.67428 23.9988 6.99988 24.0004H16.9999C18.3255 23.9988 19.5963 23.4715 20.5337 22.5342C21.471 21.5969 21.9983 20.326 21.9999 19.0004V10.4854C22.0023 9.56594 21.8224 8.6551 21.4705 7.80561C21.1187 6.95612 20.6018 6.18485 19.9499 5.53642ZM18.5359 6.95042C18.8409 7.26483 19.1035 7.61783 19.3169 8.00042H14.9999C14.7347 8.00042 14.4803 7.89507 14.2928 7.70753C14.1052 7.51999 13.9999 7.26564 13.9999 7.00042V2.68342C14.3825 2.89681 14.7355 3.15937 15.0499 3.46442L18.5359 6.95042ZM19.9999 19.0004C19.9999 19.7961 19.6838 20.5591 19.1212 21.1217C18.5586 21.6844 17.7955 22.0004 16.9999 22.0004H6.99988C6.20423 22.0004 5.44117 21.6844 4.87856 21.1217C4.31595 20.5591 3.99988 19.7961 3.99988 19.0004V5.00042C3.99988 4.20477 4.31595 3.44171 4.87856 2.8791C5.44117 2.31649 6.20423 2.00042 6.99988 2.00042H11.5149C11.6799 2.00042 11.8379 2.03242 11.9999 2.04742V7.00042C11.9999 7.79607 12.3159 8.55913 12.8786 9.12174C13.4412 9.68435 14.2042 10.0004 14.9999 10.0004H19.9529C19.9679 10.1624 19.9999 10.3204 19.9999 10.4854V19.0004ZM16.7239 13.3114C16.9065 13.5035 17.0054 13.7602 16.9988 14.0252C16.9922 14.2901 16.8808 14.5416 16.6889 14.7244L13.0999 18.1384C12.5357 18.6937 11.775 19.0035 10.9834 19.0003C10.1918 18.9971 9.43355 18.6812 8.87388 18.1214L7.33388 16.7474C7.13576 16.5708 7.01593 16.3227 7.00074 16.0577C6.99321 15.9265 7.01161 15.7951 7.05487 15.671C7.09814 15.5469 7.16542 15.4325 7.25288 15.3344C7.34034 15.2363 7.44626 15.1564 7.56461 15.0993C7.68295 15.0421 7.81139 15.0088 7.9426 15.0013C8.20759 14.9861 8.46776 15.0768 8.66588 15.2534L10.2509 16.6674C10.3416 16.7693 10.4522 16.8516 10.576 16.9091C10.6997 16.9667 10.8338 16.9983 10.9702 17.002C11.1066 17.0058 11.2423 16.9816 11.369 16.9309C11.4957 16.8802 11.6107 16.8042 11.7069 16.7074L15.3069 13.2764C15.4021 13.1854 15.5143 13.1141 15.6371 13.0666C15.76 13.019 15.891 12.9963 16.0226 12.9995C16.1543 13.0028 16.284 13.032 16.4044 13.0855C16.5247 13.139 16.6333 13.2158 16.7239 13.3114Z" fill="white"/>
        </g>
        <defs>
        <clipPath id="clip0_8_718">
        <rect width="24" height="24" fill="white"/>
        </clipPath>
        </defs>
        </svg>
        `;
        setTimeout(()=>{
            this.innerHTML = lastSvg;
        }, 500);
    }

    //Кнопка редактирования в системной роли
    document.querySelector('.systemRole button.renameChat').onclick = () =>{
        document.querySelector('.formSystemRole').classList.toggle('nonActive');
        document.querySelector('.systemRole .hoverItems').classList.toggle('nonActive');
        document.getElementById('systemRoleText').value = String(document.querySelector('#systemRole .systemRoleP').textContent).trim();
        document.querySelector('#systemRole .systemRoleP').classList.add('display-none');
        autoResize(document.getElementById('systemRoleText'));
    }

    //Кнопка отменить в системной роли
    document.getElementById('dismissRole').onclick = () =>{
        document.querySelector('.formSystemRole').classList.add('nonActive');
        document.querySelector('.systemRole .hoverItems').classList.remove('nonActive');
        document.querySelector('.systemRole p').classList.remove('display-none');
    }

    //Открытие доп настроек
    function openSettings() {
        if(document.getElementById('showFeatures').classList.contains('active')){
            document.getElementById('showFeatures').classList.remove('active');
            document.querySelector('.hiddenSettings').classList.remove('opened');
        }else{
            document.getElementById('showFeatures').classList.add('active');
            document.querySelector('.hiddenSettings').classList.add('opened');
        }
    }
    document.getElementById('showFeatures').onclick = () =>{
        if(document.getElementById('showFeatures').classList.contains('active')){
            document.getElementById('showFeatures').classList.remove('active');
            document.querySelector('.hiddenSettings').classList.remove('opened');
        }else{
            document.getElementById('showFeatures').classList.add('active');
            document.querySelector('.hiddenSettings').classList.add('opened');
        }
    }

    //Кнопки плюс минус

    let btnPlus = document.querySelectorAll('button.plusBtn'),
        btnMinus = document.querySelectorAll('button.minusButton');

    function summInputs(input, iteral){
        let inputMin = input.getAttribute('min'),
        inputMax = input.getAttribute('max'),
        inputStep = input.getAttribute('step'),
        summ = 0;
        if(iteral == "plus"){
            if(input.value < inputMax && input.value != inputMax){
                summ = Number(input.value) + Number(inputStep);
                input.value = summ.toFixed(1);
            }
        }
        else if(iteral == "minus"){
            if(input.value > 0.1){
                summ = Number(input.value) - Number(inputStep);
                input.value = summ.toFixed(1);
            }
        }
    }

    btnPlus.forEach(btn =>{
        btn.onclick = () =>{
            summInputs(btn.parentElement.parentElement.parentElement.querySelector('input'), "plus")
        }
    });

    btnMinus.forEach(btn =>{
        btn.onclick = () =>{
            summInputs(btn.parentElement.parentElement.parentElement.querySelector('input'), "minus")
        }
    })

    for (let e of document.querySelectorAll('input[type="range"].econom-rezhim')) {
        e.style.setProperty('--value', e.value);
        e.style.setProperty('--min', e.min == '' ? '0' : e.min);
        e.style.setProperty('--max', e.max == '' ? '100' : e.max);
        e.addEventListener('input', () => e.style.setProperty('--value', e.value));
    }
</script>
